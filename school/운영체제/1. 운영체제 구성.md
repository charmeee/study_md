## 컴퓨터 시스템
### 주요 구성요소
- 하드웨어
	- CPU & 장치제어기 + α(메인메모리 등..)
	- 각 장치제어기는 지역버퍼를 가짐.
	- 드라이브 : 입출력 제어기와 커널사이의 일관된 인터페이스 제공
- 운영체제
- 응용프로그램
- 사용자
### 저장장치(메모리) 계층 구조
![[assets/스크린샷 2024-03-10 오후 8.32.38.png|400]]
##### 주기억장치
- 레지스터
	- cpu 내부, 휘발성
	- cpu 계산 과정에서 사용되는 메모리![[assets/스크린샷 2024-04-03 오전 10.49.53.png]]
- 캐쉬
	- cpu 내부 , 휘발성 , SRAM
	- 이미 데이터가 존재하는지 확인하고 지역성에 따라 데이터 일시저장한다
	- 내부적으로 L1,L2,L3로 또 계층적으로 나뉜다(1,2는 코어마다 3은 코어전체 공유)
- 메인 메모리
	- cpu 외부 , 휘발성 , DRAM
	- Random access(임의 접근)
	- 프로그램,프로세스가 실행되기 위해서는 해당프로그램이 메모리에 적제되어야함
	- cpu외부에있으면서 cpu가 직접 접근 가능한 유일한 장치
- ROM
	- 계층 구조에는 보통 포함 안됨
	- cpu 외부, 비휘발성
	- bios 같이 부트프로그램이 저장되어있음.
##### 보조기억장치
- HDD(하드디스크) : 물리적으로 회전시켜 데이터 저장
- SSD : 전기적(반도체)으로 데이터 저장

### 작동 방식
대체적으로 폰노이만 구조를 띔(하나의 시스템 버스에 연결됨)
![[assets/스크린샷 2024-04-03 오후 2.24.19.png]]
구성요소들 간에 시스템 버스를 이용하여 데이터를 전송
- 시스템 버스
	- 주소버스 , 제어버스, 데이터버스
- DMA : 직접 메모리 접근
	- 메인 메모리 속도에 근접한 속도로 전송가능
	- 장치제어기는 데이터 블록을 장치버페에서 바로 메인메모리로 직접 전송. (CPU 개입 X)
	- 바이트가 전송될때마다 인터럽트 ㄴㄴ, 블록의 전송이 끝날때마다 하나의 인터럽트

버스와 커널.. 버스는 하드웨어들간의 데이터를 전송
커널은 소프트웨어 <-> 하드웨어 인터페이스 역할
### 연산 과정
- Cpu와 i/o장치는 병행실행된다.
- 컴퓨터는 하나이상의 cpu에 여러가지 i/o장치가 메모리에 연결되어있다. 때문에 메모리 자원을 가지고 경쟁하게 된다
- 각 장치 제어기(마우스와 연결된 usb컨트롤러 같은것)은 특정 유형 장치를 담당한다. 그리고 각 제어기는 지역버퍼를 가진다.
	- 입출력은 장치 -> 지역버퍼로 데이터를 이동하는 것.
- cpu :  메인메모리 <-> 지역버퍼메모리 데이터를 이동한다.
- 장치제어기는 인터럽트를 발생시켜 연산종료를 알린다.

###  시스템 구조
#### 다중처리 구조
![[assets/스크린샷 2024-04-04 오후 4.10.20.png|400]]
- 하나의 컴퓨터 안에서 cpu 여러개(다중코어)로 병렬적으로 처리하는것
- 형태
	- 비대칭 다중처리 : 각 처리기가 각각의 임무를 수행
	- 대칭 다중처리 : 각 처리기가 공통된 임무를 수행
#### 클러스터 시스템
![[assets/스크린샷 2024-04-04 오후 4.10.39.png|400]]
- 여러개의 시스템이 같이 작업을 하는 시스템
- SAN을 통해서 저장 장치를 공유
- 분산 락 관리자를 제공하여 상충하는 연산을 피하는 경우도 잇음
- 형태
	- 비대칭 클러스터링 :하나가 긴급 대기 모드 상태
	- 대칭 클러스터링 : 여러 노드가 같이 응용프로그램을 실행하고 서로를 모니터링

## 운영체제

- 목표 : 컴퓨터 시스템을 사용하기 편리하게 만들자
- 자원할당기 : 모든 자원을 관리
- 제어프로그램 : 프로그램실행제어
- 관점,목적에 따라 달라진다.
- 커널 : 시스템의 기본적인  관리를 담당
	- 소프트웨어 <-> 하드웨어 인터페이스 역할
	- 항상 실행되는 유일한 프로그램

### 운영체제 실행
부트스트램 프로그램(=펌웨어)
- 전원이 공급되는 시점에서 적재되는 프로그램
- 롬 바이오스에 저장되어 있음.
- 구성요소 초기화
- 부트 블록(디스크 블록0)에서 운영체제 위치가 담겨잇음.
- 운영체제 커널 적재후 커널을 실행

### 인터럽트
![[assets/스크린샷 2024-04-03 오후 2.04.45.png|500]]
- 하드웨어 인터럽트 : 운영체제와 하드웨어가 상호작용하는 방식
- 소프트웨어 인터럽트
- 운영체제는 인터럽트가 발생해야 작동을 시작함((interrupt driven)
##### 처리 방식(인터럽트 핸들러)
![[assets/스크린샷 2024-04-03 오후 2.09.17.png]]
 - 인터럽트 백터 : 서비스루틴의 주소를 가지고 있음
 - 서비스루틴 : 인터럽트 발생후 처리 내용
 - 소프트웨어, 하드웨어 인터럽트로 나뉜다
	 - 소프트웨어 인터럽트는 트랩 or 예외라고도 불림
	 - 시스템콜은 소프트웨어 인터럽트의 일종

### 운영체제 연산
- 이중 모드(Dual Mode)연산 시스템.
	- 사용자 모드(User mode), 커널 모드(kernel mode)
	- mode bit(하드웨어 제공) : 모드를 구분할 수 있게 만듬
#### 사용자 모드 ,커널 모드 전이


### 운영체제 구조
#### 다중 프로그래밍 시스템
- 메모리에 여러프로그램 적재
- 하나 실행하다가 대기 상태 될 시 다른프로그램 실행
- OS는 작업스케줄링과 cpu스케줄링을 진행
	- 작업 스케줄링 : 디스크 -> 메모리로 작업 이동
	- cpu 스케줄링 : 메모리 -> cpu 작업 이동
#### 시분할 시스템
- cpu가 빈번하게 다른 작업으로 전환하도록 하는 시스템
- 각 사용자들에게 작은 시간단위를 할당
- 대화식 컴퓨팅환경을 만들 수 있게함
	- 사용자와 각 작업과 상호작용 가능
- OS는 스케줄링 알고리즘과 컨텍스트 스위칭을 동시진행
	- 스케줄링 알고리즘 : 각 프로세스에게 CPU시간을 분배하기 위한 알고리즘
	- 컨텍스트 스위칭: 한작업에서 다른작업으로 전환하는것
- 프로세스전체가 실행할 수 없다면
	- 스와핑(swapping)
		- 가장 안쓰는 프로세스랑 지금 필요한 프로세스를 메모리에서 교체한다. (안쓰는 프로세스는 보조기억장치에 적재)
		- 프로세스단위의 스와핑
	- 가상메모리
		- 필요한 페이지의 주소를 가지고 (페이징 테이블) 페이지 단위로 스와핑함
		- 실제 물리적 메모리보다 더 큰 메모리를 실행가능

### 운영체제 연산
