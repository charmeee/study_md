
- CPU에서 실행할 프로세스를 선택하는 것
- 프로세스 실행은 cpu-i/o burst cycle(cpu 다음에 io)
### 목표
- CPU 사용을 최대화
- 처리량 최대화
- 총처리 시간을 최소화
- 대기 시간을 최소화
- 응답시간을 최소화
### 스케줄링 큐들
- job queue : 모든 프로세스가 올라가 있는 큐 (Long term)
- ready queue : 준비 상태에 있는 큐들이 올라가 있다 (short term)
- device queue : 입출력 장치마다 있는것,
#### 큐잉 다이어 그램
큐, 자원(원모양),프로세스의 이동 흐름을 나타냄
![[assets/스크린샷 2024-04-16 오후 9.47.34.png]]
process create 되고 나선 바로 job queue에 적재된다.
이 적재된것중에 ready queue 로 가는 것
순서 : create > job queue > ready queue

## 스케줄러
### 단기 스케줄러 (= cpu 스케줄러) 
- 다음에 cpu에 할당될 프로세스를 선택한다
- 즉 준비큐에 있는 프로세스를 선택한다.
- ms 간격으로 호출 > 빨라야함

#### cpu 스케줄러가 실행되는 작업
- running -> wait 상태 전이 (비선점 방식)
- running -> ready 상태 전이 (선점 방식)
- wait -> ready 상태 전이 (선점방식)
- 종료 될 때 (비선점 방식)
- 선점 방식인 이유
	- 공유 데이터 접근 고려
	- 커널모드있는 동안의 선점 고려
	- os작업중에 인터럽트 발생 고려

#### dispatcher
단기 스케줄러가 선택한 프로세스에게 cpu 제어를 주는 모듈
- 하는 작업
	- 문맥교환
	- 사용자 모드로 전환
	- 프로그램을 다시 시작하기위해 사종자 프로그램의 적절한 위치로 이동
- 디스페처 지연
	- 디스페처가 하나의 프로세스를 중단시키고 다른 프로세스를 실행시키는데 소요되는 시간


### 장기 스케줄러 (= 잡 스케줄러)
- 준비큐로 이동할 프로세스를 선택한다.
- s, min 간격으로 호출
- 이 스케줄러가 다중프로그래밍 정도를 결정
- io bound 와 cpu bound프로세스가 고루 섞이도록 한다.
### 중기 스케줄러
- 많은 프로세스가 있을때(= 다중프로그래밍 중일 때), 너무 많은 프로세스에게 메모리를 할당해 시스템 성능이 저하 되는 것을 방지하기 위함
- swaping 이용
	-  물리 메모리 공간이 부족해지면, 물리 메모리의 확장 개념으로 swap area를 사용하고 swap out 시켜 내보냄
	- 메모리 <-> 디스크

## 스케줄링 알고리즘
### FCFS(first come, first served)
- 걍 queue
- 딱 시작하는 타이밍이 waiting 시간
- 호위효과가 발생할 수 있음
	- 모든 프로세스가 긴프로세스하나가 cpu를 양도하기를 기다리는 것
### priority 스케줄링
우선순위가 먼저인 것을 머저 할당
아래는 우선순위가 cpu burst 시간인 경우이다
- SJF(shortest job first)
	- 버스트 길이를 기준으로 가장 짧은 시간을 가진 프로세스를 스케줄
	- 언제나 최소의 평균 대기시간을 보장
	- 단기 스케줄러에서 구현 못함
	- BUT, CPU 버스트 시간을 알기 어렵다.
	- 대략 예측 방법
		- t(n) : n번째 프로세스 실제 CPU 사용 시간
		- 타우 n+1 : (n+1)번째 프로세스 CPU 사용 시간 추정치
  ![[assets/스크린샷 2024-04-17 오후 4.56.05.png|300]]
- SRTF(shortest remaining time first)
	- 선점 방식
	- 진행하다가 그 시간에 bursttime이 더 짧은 프로세스가 오면 선점함
	- 대기시간 = 마지막 조각 프로세스가 실행한 시간 - 프로세스도착시간 - 이전에 다른 조각프로세스가 실행한 시간
#### 문제/해결책
- starvation : 낮은 우선순위 프로세스는 실행되지 않을 수 있다.
- aging : 시간이 흘러갈수록 프로세스의 우선순위를 증가시킨다.
### RR(round robin)
- 선점형
- 프로세스는 적은양의 cpu 시간을 할당 받음(time quantum)
- if 준비큐에 n개, 시간할당량 q, 각프로세스는 q(n-1) 이상을 대기하지 않음